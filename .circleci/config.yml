version: 2.1
orbs:
  win: circleci/windows@2.4.0
jobs:

  lint-unit-39: &lint-unit
    docker:
      - image: circleci/python:3.6.1
    
    steps:
      - checkout
      - run:
          name: install dependencies
          command: |
            python3 -m venv venv
            . venv/bin/activate
            sudo apt update && sudo apt upgrade
            sudo apt-get install -y python-dev libldap2-dev libsasl2-dev libssl-dev
            sudo apt install curl
            python --version
            pip install --upgrade pip
            curl -sSL https://install.python-poetry.org | python3 -
            make requirements
            export PATH="/root/.local/bin:$PATH"
            make black-check
      - run:
          name: run tests
          command: |
            . venv/bin/activate
            make isort-check 
            
workflows:
 version: 2
 python3.9:
   jobs:
     - lint-unit-39
